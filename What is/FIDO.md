# FIDO
```
채용공고를 보던중 처음보는 단어가 있었다. FIDO라는 단어길래 '이게 뭐시여..'하면서 찾아봤다는데
생각보다 알아두면 좋을것 같다는 느낌이 많았다. 그리고 정리하다보니 어려운 개념이었고
나중에 실제로 적용하지 않으면 완벽하게 이해했다고는 할 수 없을 것 같다..
```

## 개념
* FIDO(파이도)는 공개키 암호화 방식을 활용하여 안전하면서도 **간편한 인증**을 제공하기 위한 인증의 표준
* 개방적, 상호운용, 확장 가능하도록 설계
* 모든 FIDO 프로토콜에서는 **등록(Registration)**과 **인증(Authentication)**이라는 두가지 주요 flow가 있음
* 구현방식에 따라 UAF, U2F, FIDO 2.0으로 표준이 있음
* 지문인식, 홍채인식, 얼굴인식 등
* ![image](https://user-images.githubusercontent.com/97998574/188109846-7e8eb2a8-f6ec-4649-a30e-47c398efd9e9.png)


### 등록(Registration)
* 등록은 인증을 위한 사용자 키 쌍을 생성하고, 생성된 키를 사용할 수 있도록 공개키를 FIDO서버에 등록하는 절차
1. FIDO서버에서 사용자의 인증장치(핸드폰 지문인식)에 챌린지(Random number) 및 추가 매개 변수를 보낸다.
2. 인증장치는 사용자를 검증하고, 새로운 키 쌍 및 공개키 증명을 생성
3. 인증장치는 공개키와 증명으로 Assertion(번역:승인,주장)을 생성하고 서명한 뒤 해당 값을 FIDO서버로 전송
4. FIDO서버는 서명을 확인하여 Assersion을 검증하고 성공하면 받은 공개키를 저장하고 사용자 계정에 매핑.

### 인증(Authentication)
* 인증은 사전에 등록된 공개키를 활용하여 사용자를 인증하는 절차로 등록절차가 완료되어야 가능
1. FIDO서버는 인증자에게 챌린지와 매개 변수를 보낸다.
2. 인증장치는 등록과정에서 생성된 개인키를 잠금 해제하기 전에 **생체 인증지원 여부**를 확인하거나 **인증장치가 실제로 있는지** 확인
3. 인증장치는 Assertion을 생성하고 개인키로 서명한 후 Assertion을 FIDO서버로 보낸다.
4. FIDO서버에서 Assertion이 키 식별자를 기반으로 사용할 키를 식별하고 공개키를 찾은 후 공개키를 사용하여 서명을 확인
5. 확인 후 FIDO서버는 새 인증 세션을 생성하고 클라이언트에 인증토큰 or 쿠키를 발급
![image](https://user-images.githubusercontent.com/97998574/188108429-c1ac499f-0571-4249-a9f2-ee1d9f243c46.png)

## UAF(Universal Authentication Framwork)
* ID와 PW인증 방식 대신 개인의 고유한 생체정보를 인증과정에 사용
* 스마트폰과 같은 모바일 환경에 적합

## U2F(Universal 2nd Factor)
* 기존 ID와 PW 인증방식과 함께 생체정보나 **별도의 2차인증 장치**를 추가적인 인증용도로 사용
* 외부인증장치(USB,NFC,블루투스)를 사용할 수 있기 때문에 PC환경이 적합
![image](https://user-images.githubusercontent.com/97998574/188113335-783d7587-ef84-428b-8cf2-4a1c72af8f60.png)


## FIDO 2.0
* Web Browser를 사용하는 web환졍에서 사용할 수 있또록 UAF와 U2F를 통합 확장한것
* 이를 지원하기 위해 WebAuthn 표준이 되었고 W3C가 WebAuthn을 표준으로 발표
![image](https://user-images.githubusercontent.com/97998574/188113109-e80266d5-bd4d-4f40-bf39-6b4f8fe353fd.png)


## 단점
* 서비스 회사마다 등록절차를 거쳐야한다. 삼성페이, 각 은행별 지문등록, 등등
* 인증장치(예:핸드폰)을 바꾸면 사용하고 있던 서비스를 모두 다시 등록해야함
* 인증장치가 고장나거나 분실될 경우 일시적으로 서비스를 받지 못함
