# Modeling
```
면접에서는 이것저것 물어본다. "회원관리서비스 어떻게 만드셨어요?" 
어떻게 대답해야 좋은지 몰랐다.
"설계부터 구현까지 전부다요" 면접관들의 표정이 의아하다. 원하는 답이 아니었나보다. 
그 중 어떤 면접관은 친절했다.
"그러면 DB설계는 어떻게 했어요??" 이때 나는 깨달아야 했지만 몰랐따. 
지금도 정확히 파악한것인지 모른다.
그래도 맞다치고 모델링에 대해 정리해보고자 한다.
```

## 개념
* 모델링이란 현실세계에 있는것을 컴퓨터세계로 옮기는 과정

## 모델링 순서
* 업무파악 - 개념적 모델링 - 논리적 모델링 - 물리적 모델링

## 업무파악
* 실무자와 개발자의 직접적인 소통이 필요함
* 이때 실무자와 개발자가 UI를 직접 그려보면서 소통하면 좋음
* 그 소통의 결과물을 서류로 보존 (예. 현업 요구사항 정의서)

## 개념적 모델링 (도구: ovenapp, drawIO)
* 달성하고자 하는 목표에 어떤 개념들이 존재하고, 개념간의 상호작용을 판단
* ERD : Entity Relationship Diagram
   - 정보, 그룹, 관계를 표현하는 방법
  - Entity - Table, Attribute - Column, Relation - PK,Fk, Tuple - Row
  - 식별자 선정 : 그 대상과 같은 값을 가지고 있으면 안된다. 고유하다. 후보키, 기본키, 대체키
  - Entity간 상호 관계를 정의해야함 (예. 일대일, 다대일, 필요, 충분)
![image](https://user-images.githubusercontent.com/97998574/189880025-c424f331-db63-49c2-aefc-12b9f08a115e.png)

## 논리적 모델링 (도구 : ER Master 이클립스 plug In)
* Mapping Rule : ERD에 표현한 내용을 RDB(관계형 데이터 베이스)에 맞는 형식으로 전환할때 사용하는 방법
* Entity를 Table로 변경
  - 데이터를 설정(데이터타입) = 도메인 설정, 크기, not null 설정, index 설정 등
  - 1:1 관계일 경우 자식테이블에 FK 지정
  - 1:N 관계일 경우 제일 쉬움, 1쪽에 FK 지정
  - N:M 관계일 경우 어느쪽에 컬럼을 추가하기 애매해서 어려움
  - N:M 관계일 경우 중간단계 테이블을 생성해서 사용
- ![image](https://user-images.githubusercontent.com/97998574/190086497-1edc15eb-57f6-40a7-8634-d2f9e40614b6.png)

## 정규화 (Normalization)
 * 정제되지 않은 데이터를 관계형 데이터 베이스에 어울리게 만들어주는 과정
 * 제 1정규화 (각 컬럼의 데이터가 원자성을 가진다)
   - 한 컬럼에 여러개의 데이터가 있을 경우 테이블을 나눠 해결한다.
 * 제 2정규화 (부분 종속성이 없어야 한다)
   - 한 테이블의 여러개의 컬럼이 단 한개의 컬럼과 관계가 있을 경우 또 테이블을 나눈다.
 * 제 3정규화 (이행 종속성이 없어야 한다)
   - 이행 종속성 : 한 테이블내에서 특정 컬럼이 키값이 아닌 다른 칼럼에 종속되는 현상
   - 해당 컬럼을 또 테이블을 나눈다.
   - 대부분의 정규형은 제 3정규형에서 마무리된다.
 * BCNF (모든 식별자는 주 식별자가 되어야 한다)
   - 결정자 중 후보키를 제거하여 테이블을 나눈다.

## 물리적 모델링 
* 이상적인 표를 구체적인 DB제품에 맞는 현실적인 표로 만드는 과정으로 **성능** 이 중요함
* 이 성능 문제를 해결하기 위해 역정규화, index, application 재설정을 사용해 성능을 향상시키기도 함

## 역정규화 (De Normalization)
* 쓰기에 편리함을 위해 읽기성능 희생 / 정규화 과정으로 인해 테이블이 나눠지기 때문에 join의 성능이 저하
* 정구화 과정이 이루어진 후 역정규화 과정이 있어야 하며 성능이 떨어진다고 해서 꼭 역정규화를 하는것은 아님
* 엄밀하고 공정한 기술이 아니므로 상황에 따라 능력에 따라 사용
* 역정규화를 사용할 경우 오류가 날 가능성이 올라가지만 읽기 성능향상이 더 크기 때문에 사용
* 역정규화 사용 예
  - 나눠놨던 테이블의 칼럼을 다시 한개의 테이블에 합치는 경우
  - 테이블의 한 컬럼의 어떠한 계산값을 자주 사용할 경우 테이블에 새로운 컬럼 추가
  - 테이블의 한 컬럼의 사용량이 압도적으로 많을때 새로운 테이블로 나눔
